# FitMeal - 用户故事文档

<meta>
  <document-id>fitmeal-userstory</document-id>
  <version>1.0.0</version>
  <project>FitMeal 健身饮食助手</project>
  <type>User Stories</type>
  <created>2026-01-14</created>
  <depends>real.md, cog.md, prd.md</depends>
</meta>

---

## 复杂故事总览

| 复杂故事 | 名称 | MS 数量 | 优先级 | 故事类型分布 |
|---------|------|--------|--------|-------------|
| CS-01 | 用户引导 | 3 | P0 | Light 2, Dark 1 |
| CS-02 | 快速饮食决策 | 4 | P0 | Light 2, Grey 1, Dark 1 |
| CS-03 | 食谱跟做 | 4 | P0 | Light 2, Grey 2 |
| CS-04 | 预制菜管理 | 4 | P1 | Light 2, Grey 1, Dark 1 |
| CS-05 | 运动记录 | 2 | P1 | Light 1, Grey 1 |

**总计：17 个最小故事**
- Light 故事：9 个 (53%) - 主要价值交付
- Dark 故事：3 个 (18%) - 异常处理
- Grey 故事：5 个 (29%) - 日常使用优化

---

## CS-01: 用户引导

**描述：** 新用户从注册到完成首次设置的完整旅程

**用户类型：** 新用户（健身者/饮食管理者）

**核心价值：** 让用户快速进入系统，设置个人目标

**用户旅程：**
```
访问首页 → 注册账号 → 设置健身目标 → 进入主界面
```

---

### MS-L-01: 快速注册

**复杂故事：** CS-01
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 2

#### 用户故事
作为一个 **新用户**，
我想要 **快速注册账号**，
以便 **开始使用 FitMeal 管理我的饮食**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 用户没有账号，无法使用系统 |
| **转折点** | 系统提供简单的注册流程 |
| **结束状态** | 用户拥有账号，可以登录使用 |
| **情感体验** | 从"被拒之门外" → "获得入场资格" |

#### 验收标准

- [ ] AC1: 用户可以看到注册入口按钮
- [ ] AC2: 用户可以使用邮箱+密码注册
- [ ] AC3: 注册成功后自动登录并跳转到目标设置页
- [ ] AC4: 密码使用加密存储（real.md 约束）

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 首页显示"注册"按钮 |
| 操作中 | 填写邮箱、密码表单 |
| 操作后 | 看到"注册成功"提示，进入目标设置页 |

#### 约束 (from real.md)
- 密码必须加密存储

#### 依赖
- **Requires**: 无
- **Enables**: MS-L-02 首次设置目标

---

### MS-L-02: 首次设置目标

**复杂故事：** CS-01
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 3

#### 用户故事
作为一个 **新注册用户**，
我想要 **设置我的健身目标**，
以便 **系统能给我个性化的饮食推荐**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 系统不了解用户，无法个性化推荐 |
| **转折点** | 用户告诉系统自己的目标 |
| **结束状态** | 系统了解用户，可以提供个性化服务 |
| **情感体验** | 从"系统不懂我" → "系统知道我要什么" |

#### 验收标准

- [ ] AC1: 用户可以选择健身目标（增肌/减脂/维持/健康饮食）
- [ ] AC2: 用户可以设置忙碌程度（时间充裕/普通/非常忙碌）
- [ ] AC3: 用户可以设置烹饪水平（新手/熟练/大厨级）
- [ ] AC4: 设置完成后跳转到主界面

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 目标设置页面，显示选项 |
| 操作中 | 点击选择自己的目标 |
| 操作后 | 看到"设置完成"，进入主界面 |

#### 依赖
- **Requires**: MS-L-01 快速注册
- **Enables**: MS-L-03 选择情境获取推荐

---

### MS-D-01: 注册失败处理

**复杂故事：** CS-01
**故事类型：** Dark（黑暗）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **尝试注册的用户**，
我想要 **在注册失败时获得清晰的错误提示**，
以便 **我能修正问题并成功注册**。

#### 故事评估（Dark Story: 从好到坏再恢复）

| 维度 | 描述 |
|------|------|
| **起始状态** | 用户正常填写注册表单 |
| **转折点** | 邮箱已存在/密码太简单/网络错误 |
| **结束状态** | 用户看到错误原因，修正后成功注册 |
| **情感体验** | 从"正常" → "受阻" → "被帮助解决" |

#### 验收标准

- [ ] AC1: 邮箱已存在时显示"该邮箱已注册，请登录"
- [ ] AC2: 密码少于8位时显示"密码至少需要8个字符"
- [ ] AC3: 网络错误时显示"网络异常，请重试"
- [ ] AC4: 错误提示在表单旁边显示，不需要弹窗

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 正常的注册表单 |
| 操作中 | 提交后看到红色错误提示 |
| 操作后 | 修正后成功注册 |

#### 依赖
- **Requires**: MS-L-01 快速注册
- **Enables**: 无

---

## CS-02: 快速饮食决策

**描述：** 用户通过选择当前情境，快速获得"该吃什么"的答案

**用户类型：** 已注册用户

**核心价值：** 5秒内消除"吃什么"的决策焦虑

**用户旅程：**
```
打开首页 → 选择情境 → 查看推荐 → 决定吃什么
```

---

### MS-L-03: 选择情境获取推荐

**复杂故事：** CS-02
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 5

#### 用户故事
作为一个 **不知道该吃什么的用户**，
我想要 **告诉系统我现在的情况，获得饮食推荐**，
以便 **快速决定今天吃什么**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 用户不知道该吃什么，有决策焦虑 |
| **转折点** | 选择情境，系统给出推荐 |
| **结束状态** | 用户知道该吃什么，焦虑消除 |
| **情感体验** | 从"纠结迷茫" → "清晰确定" |

#### 验收标准

- [ ] AC1: 首页显示4个情境卡片（刚练完/很忙/有时间/朋友来了）
- [ ] AC2: 点击情境卡片后3秒内显示推荐结果
- [ ] AC3: 推荐卡片显示：菜品名、营养概览、预计时间
- [ ] AC4: 页面底部显示免责声明（real.md 约束）

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 首页4个大情境卡片 |
| 操作中 | 点击"刚练完"，看到加载动画 |
| 操作后 | 看到2-3个推荐菜品卡片 |

#### 约束 (from real.md)
- 饮食建议必须标注"仅供参考"免责声明

#### 依赖
- **Requires**: MS-L-02 首次设置目标
- **Enables**: MS-L-04 查看推荐详情

---

### MS-L-04: 查看推荐详情

**复杂故事：** CS-02
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 2

#### 用户故事
作为一个 **看到推荐的用户**，
我想要 **查看推荐菜品的详细信息**，
以便 **确认这个推荐适合我**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 只看到菜品名称，不确定是否适合 |
| **转折点** | 查看详情，了解营养和难度 |
| **结束状态** | 确认适合自己，可以开始做 |
| **情感体验** | 从"不确定" → "有信心" |

#### 验收标准

- [ ] AC1: 点击推荐卡片可展开详情
- [ ] AC2: 详情包含：营养成分、烹饪时间、难度等级
- [ ] AC3: 显示"就吃这个"按钮进入食谱

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 推荐卡片只显示基本信息 |
| 操作中 | 点击卡片展开 |
| 操作后 | 看到详细营养信息和"就吃这个"按钮 |

#### 依赖
- **Requires**: MS-L-03 选择情境获取推荐
- **Enables**: MS-L-05 查看食谱详情

---

### MS-G-01: 换一个推荐

**复杂故事：** CS-02
**故事类型：** Grey（灰色）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **对当前推荐不满意的用户**，
我想要 **换一个推荐**，
以便 **找到更符合我口味的选择**。

#### 故事评估（Grey Story: 循环优化）

| 维度 | 描述 |
|------|------|
| **循环模式** | 看推荐 → 不满意 → 换一个 → 满意 |
| **优化点** | 快速切换，不需要返回重选情境 |
| **习惯形成** | 用户知道可以一直换到满意为止 |
| **情感体验** | 从"将就" → "自主选择" |

#### 验收标准

- [ ] AC1: 推荐页面显示"换一批"按钮
- [ ] AC2: 点击后1秒内刷新推荐内容
- [ ] AC3: 新推荐不与之前重复

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 当前推荐 + "换一批"按钮 |
| 操作中 | 点击按钮，短暂加载 |
| 操作后 | 看到新的推荐列表 |

#### 依赖
- **Requires**: MS-L-03 选择情境获取推荐
- **Enables**: 无

---

### MS-D-02: 无匹配推荐处理

**复杂故事：** CS-02
**故事类型：** Dark（黑暗）
**优先级：** P2
**故事点数：** 2

#### 用户故事
作为一个 **在特殊情况下的用户**，
我想要 **在系统无法匹配推荐时获得帮助**，
以便 **仍然能得到一些饮食建议**。

#### 故事评估（Dark Story: 从好到坏再恢复）

| 维度 | 描述 |
|------|------|
| **起始状态** | 用户期待获得推荐 |
| **转折点** | 系统食谱库中无匹配项 |
| **结束状态** | 系统提供备选方案或通用建议 |
| **情感体验** | 从"期待" → "失望" → "仍有帮助" |

#### 验收标准

- [ ] AC1: 无匹配时显示友好提示而非空白
- [ ] AC2: 提供"查看全部食谱"的备选入口
- [ ] AC3: 显示通用营养建议

#### 依赖
- **Requires**: MS-L-03 选择情境获取推荐
- **Enables**: 无

---

## CS-03: 食谱跟做

**描述：** 用户跟着真实食谱一步步完成菜品制作

**用户类型：** 已选择推荐的用户（主要是烹饪新手）

**核心价值：** 让烹饪新手也能做出推荐的菜品

**用户旅程：**
```
进入食谱 → 查看食材 → 逐步跟做 → 完成制作
```

---

### MS-L-05: 查看食谱详情

**复杂故事：** CS-03
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 3

#### 用户故事
作为一个 **决定做某道菜的用户**，
我想要 **查看完整的食谱信息**，
以便 **准备好食材开始制作**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 知道要做什么，但不知道怎么做 |
| **转折点** | 看到详细食谱和食材清单 |
| **结束状态** | 清楚需要什么、怎么做 |
| **情感体验** | 从"无从下手" → "胸有成竹" |

#### 验收标准

- [ ] AC1: 显示食谱来源链接（real.md 约束）
- [ ] AC2: 显示完整食材清单（名称+用量）
- [ ] AC3: 显示总烹饪时间和难度
- [ ] AC4: 显示"开始做"按钮进入步骤导航

#### 约束 (from real.md)
- 食谱必须来自真实来源，显示出处链接
- 禁止 AI 编造食谱步骤

#### 依赖
- **Requires**: MS-L-04 查看推荐详情
- **Enables**: MS-G-02 步骤导航

---

### MS-G-02: 步骤导航

**复杂故事：** CS-03
**故事类型：** Grey（灰色）
**优先级：** P0
**故事点数：** 3

#### 用户故事
作为一个 **正在做菜的用户**，
我想要 **逐步跟着食谱操作**，
以便 **不遗漏任何步骤**。

#### 故事评估（Grey Story: 循环优化）

| 维度 | 描述 |
|------|------|
| **循环模式** | 看步骤 → 操作 → 下一步 → 直到完成 |
| **优化点** | 大字体、清晰图片，方便边做边看 |
| **习惯形成** | 熟悉后可以跳过已知步骤 |
| **情感体验** | 从"紧张" → "跟上节奏" → "顺利完成" |

#### 验收标准

- [ ] AC1: 每个步骤显示序号、图片、文字说明
- [ ] AC2: 显示"上一步"/"下一步"导航按钮
- [ ] AC3: 顶部显示进度条（当前步骤/总步骤）
- [ ] AC4: 最后一步显示"完成制作"按钮

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 步骤1详情 + 进度 1/N |
| 操作中 | 点击"下一步" |
| 操作后 | 步骤2详情 + 进度 2/N |

#### 依赖
- **Requires**: MS-L-05 查看食谱详情
- **Enables**: MS-L-06 完成食谱制作

---

### MS-G-03: 生成购物清单

**复杂故事：** CS-03
**故事类型：** Grey（灰色）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **准备去买菜的用户**，
我想要 **导出食材购物清单**，
以便 **去超市时不会遗漏**。

#### 故事评估（Grey Story: 循环优化）

| 维度 | 描述 |
|------|------|
| **循环模式** | 看食谱 → 导出清单 → 购物 → 做菜 |
| **优化点** | 一键导出，可勾选已有食材 |
| **习惯形成** | 每次做新菜前都导出清单 |
| **情感体验** | 从"记不住" → "清单在手" |

#### 验收标准

- [ ] AC1: 食谱详情页显示"生成购物清单"按钮
- [ ] AC2: 可以勾选已有的食材（排除出清单）
- [ ] AC3: 可以复制清单文本或分享

#### 依赖
- **Requires**: MS-L-05 查看食谱详情
- **Enables**: 无

---

### MS-L-06: 完成食谱制作

**复杂故事：** CS-03
**故事类型：** Light（光明）
**优先级：** P0
**故事点数：** 2

#### 用户故事
作为一个 **完成所有步骤的用户**，
我想要 **标记这道菜完成**，
以便 **记录这一餐并获得成就感**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 菜做完了，但系统不知道 |
| **转折点** | 用户点击"完成制作" |
| **结束状态** | 系统记录这一餐，用户获得成就感 |
| **情感体验** | 从"做完了" → "被认可的成就" |

#### 验收标准

- [ ] AC1: 最后一步显示"完成制作"按钮
- [ ] AC2: 点击后显示庆祝动画/提示
- [ ] AC3: 自动记录为今天的一餐
- [ ] AC4: 询问是否存入预制菜库存（如果适合预制）

#### 用户可感知变化

| 阶段 | 用户看到/感受到 |
|------|----------------|
| 操作前 | 最后一步 + "完成制作"按钮 |
| 操作中 | 点击按钮 |
| 操作后 | 庆祝动画 + "已记录到今日饮食" |

#### 依赖
- **Requires**: MS-G-02 步骤导航
- **Enables**: MS-L-07 添加预制菜到库存

---

## CS-04: 预制菜管理

**描述：** 用户批量制作预制菜，管理冰箱库存，工作日快速加热食用

**用户类型：** 有预制菜习惯的用户

**核心价值：** 解决"很忙没时间做饭"的问题

**用户旅程：**
```
周末备餐 → 记录库存 → 工作日消费 → 过期提醒
```

---

### MS-L-07: 添加预制菜到库存

**复杂故事：** CS-04
**故事类型：** Light（光明）
**优先级：** P1
**故事点数：** 3

#### 用户故事
作为一个 **刚做完预制菜的用户**，
我想要 **把做好的菜添加到冰箱库存**，
以便 **工作日能快速找到可以吃的**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 做了预制菜但容易忘记冰箱里有什么 |
| **转折点** | 记录到系统库存 |
| **结束状态** | 随时知道冰箱里有什么、还能吃多久 |
| **情感体验** | 从"混乱" → "井井有条" |

#### 验收标准

- [ ] AC1: 完成制作后显示"存入冰箱"选项
- [ ] AC2: 可以设置份数（默认根据食谱）
- [ ] AC3: 自动计算保质期（根据菜品类型）
- [ ] AC4: 保存后在库存列表可见

#### 依赖
- **Requires**: MS-L-06 完成食谱制作
- **Enables**: MS-L-08 消费预制菜

---

### MS-L-08: 消费预制菜

**复杂故事：** CS-04
**故事类型：** Light（光明）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **工作日很忙的用户**，
我想要 **从库存中选择一份预制菜吃掉**，
以便 **快速解决一餐并更新库存**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 很忙，不知道冰箱里有什么 |
| **转折点** | 查看库存，选择一份加热 |
| **结束状态** | 吃到健康餐，库存自动减少 |
| **情感体验** | 从"焦虑" → "轻松解决" |

#### 验收标准

- [ ] AC1: 库存列表显示每道菜的剩余份数
- [ ] AC2: 点击"今天吃这个"消费一份
- [ ] AC3: 库存数量自动减1
- [ ] AC4: 份数为0时从列表移除

#### 依赖
- **Requires**: MS-L-07 添加预制菜到库存
- **Enables**: 无

---

### MS-G-04: 查看库存列表

**复杂故事：** CS-04
**故事类型：** Grey（灰色）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **想知道冰箱里有什么的用户**，
我想要 **查看预制菜库存列表**，
以便 **决定今天吃什么或者需要补充什么**。

#### 故事评估（Grey Story: 循环优化）

| 维度 | 描述 |
|------|------|
| **循环模式** | 打开库存 → 浏览 → 选择/补充 |
| **优化点** | 按保质期排序，即将过期的优先显示 |
| **习惯形成** | 每天开冰箱前先看库存 |
| **情感体验** | 从"不确定" → "一目了然" |

#### 验收标准

- [ ] AC1: 显示所有预制菜（名称+份数+剩余天数）
- [ ] AC2: 默认按保质期升序排列
- [ ] AC3: 即将过期（<3天）的显示黄色警示
- [ ] AC4: 已过期的显示红色警示

#### 依赖
- **Requires**: MS-L-07 添加预制菜到库存
- **Enables**: MS-D-03 过期提醒

---

### MS-D-03: 过期提醒

**复杂故事：** CS-04
**故事类型：** Dark（黑暗）
**优先级：** P1
**故事点数：** 2

#### 用户故事
作为一个 **可能忘记预制菜保质期的用户**，
我想要 **在预制菜即将过期时收到提醒**，
以便 **及时吃掉避免浪费**。

#### 故事评估（Dark Story: 从好到坏再恢复）

| 维度 | 描述 |
|------|------|
| **起始状态** | 预制菜正常存放 |
| **转折点** | 保质期临近，可能浪费 |
| **结束状态** | 用户被提醒，及时食用 |
| **情感体验** | 从"正常" → "可能浪费" → "及时挽救" |

#### 验收标准

- [ ] AC1: 保质期剩余3天时在首页显示提醒
- [ ] AC2: 提醒包含菜品名称和剩余天数
- [ ] AC3: 点击提醒跳转到库存详情
- [ ] AC4: 已过期的标记为红色并提示处理

#### 依赖
- **Requires**: MS-G-04 查看库存列表
- **Enables**: 无

---

## CS-05: 运动记录

**描述：** 用户记录运动数据，让系统更了解自己，获得更精准的推荐

**用户类型：** 有运动习惯的用户

**核心价值：** 让 AI 推荐更个性化

**用户旅程：**
```
记录运动 → 系统学习 → 推荐更精准
```

---

### MS-L-09: 记录运动

**复杂故事：** CS-05
**故事类型：** Light（光明）
**优先级：** P1
**故事点数：** 3

#### 用户故事
作为一个 **刚完成运动的用户**，
我想要 **记录今天的运动**，
以便 **系统能根据我的运动给出更精准的饮食建议**。

#### 故事评估（Light Story: 从坏到好）

| 维度 | 描述 |
|------|------|
| **起始状态** | 系统不知道用户运动了什么 |
| **转折点** | 用户记录运动数据 |
| **结束状态** | 系统了解用户运动情况，推荐更精准 |
| **情感体验** | 从"通用推荐" → "专属推荐" |

#### 验收标准

- [ ] AC1: 可以选择运动类型（力量/有氧/HIIT/瑜伽/休息）
- [ ] AC2: 可以选择运动强度（轻度/中度/高强度）
- [ ] AC3: 可以选择训练部位（上肢/下肢/核心/全身）
- [ ] AC4: 可以输入运动时长
- [ ] AC5: 保存后显示"已记录"确认

#### 约束 (from real.md)
- 运动数据加密存储，仅用户本人可访问

#### 依赖
- **Requires**: MS-L-02 首次设置目标
- **Enables**: MS-L-03 选择情境获取推荐（更精准）

---

### MS-G-05: 查看运动历史

**复杂故事：** CS-05
**故事类型：** Grey（灰色）
**优先级：** P2
**故事点数：** 2

#### 用户故事
作为一个 **想回顾运动情况的用户**，
我想要 **查看运动历史记录**，
以便 **了解自己的运动规律**。

#### 故事评估（Grey Story: 循环优化）

| 维度 | 描述 |
|------|------|
| **循环模式** | 运动 → 记录 → 回顾 → 调整 |
| **优化点** | 日历视图，一眼看出运动频率 |
| **习惯形成** | 定期回顾，保持运动节奏 |
| **情感体验** | 从"模糊印象" → "清晰数据" |

#### 验收标准

- [ ] AC1: 提供日历视图显示运动日期
- [ ] AC2: 点击日期可查看当天运动详情
- [ ] AC3: 显示本周/本月运动次数统计

#### 依赖
- **Requires**: MS-L-09 记录运动
- **Enables**: 无

---

## 故事地图

```
用户旅程: 注册 → 使用 → 熟练 → 持续

═══════════════════════════════════════════════════════════════

迭代 1 (MVP) - 核心价值验证
├── CS-01: 用户引导
│   ├── MS-L-01: 快速注册 (Light) ⭐
│   │   └── 从"无账号" → "有账号"
│   └── MS-L-02: 首次设置目标 (Light) ⭐
│       └── 从"系统不懂我" → "系统知道我要什么"
│
├── CS-02: 快速饮食决策
│   ├── MS-L-03: 选择情境获取推荐 (Light) ⭐⭐⭐ 核心
│   │   └── 从"不知道吃什么" → "知道该吃什么"
│   └── MS-L-04: 查看推荐详情 (Light) ⭐
│       └── 从"不确定" → "有信心"
│
└── CS-03: 食谱跟做
    ├── MS-L-05: 查看食谱详情 (Light) ⭐⭐
    │   └── 从"不会做" → "知道怎么做"
    ├── MS-G-02: 步骤导航 (Grey) ⭐⭐
    │   └── 逐步跟做直到完成
    └── MS-L-06: 完成食谱制作 (Light) ⭐
        └── 从"做完了" → "被记录的成就"

═══════════════════════════════════════════════════════════════

迭代 2 - 预制菜 + 运动记录
├── CS-04: 预制菜管理
│   ├── MS-L-07: 添加预制菜到库存 (Light)
│   ├── MS-L-08: 消费预制菜 (Light)
│   ├── MS-G-04: 查看库存列表 (Grey)
│   └── MS-D-03: 过期提醒 (Dark)
│
├── CS-05: 运动记录
│   └── MS-L-09: 记录运动 (Light)
│
└── CS-02: 快速饮食决策 (补充)
    └── MS-G-01: 换一个推荐 (Grey)

═══════════════════════════════════════════════════════════════

迭代 3 - 异常处理 + 体验优化
├── CS-01: 用户引导 (补充)
│   └── MS-D-01: 注册失败处理 (Dark)
│
├── CS-02: 快速饮食决策 (补充)
│   └── MS-D-02: 无匹配推荐处理 (Dark)
│
├── CS-03: 食谱跟做 (补充)
│   └── MS-G-03: 生成购物清单 (Grey)
│
└── CS-05: 运动记录 (补充)
    └── MS-G-05: 查看运动历史 (Grey)
```

---

## 迭代计划

### 迭代 1：核心价值验证

**目标：** 验证"快速知道该吃什么 + 跟着食谱做出来"的核心价值

**故事列表：**

| Story ID | 标题 | 类型 | 故事点 |
|----------|------|------|--------|
| MS-L-01 | 快速注册 | Light | 2 |
| MS-L-02 | 首次设置目标 | Light | 3 |
| MS-L-03 | 选择情境获取推荐 | Light | 5 |
| MS-L-04 | 查看推荐详情 | Light | 2 |
| MS-L-05 | 查看食谱详情 | Light | 3 |
| MS-G-02 | 步骤导航 | Grey | 3 |
| MS-L-06 | 完成食谱制作 | Light | 2 |

**总计：** 20 故事点

**故事类型分布：**
- Light: 6 个 (86%)
- Grey: 1 个 (14%)
- Dark: 0 个 (0%)

**预期用户价值：**
完成后用户可以：
1. 注册并设置个人目标
2. 选择情境获得饮食推荐
3. 跟着真实食谱完成一道菜

---

### 迭代 2：预制菜 + 运动

**目标：** 支持预制菜工作流，添加运动记录提升推荐精准度

**故事列表：**

| Story ID | 标题 | 类型 | 故事点 |
|----------|------|------|--------|
| MS-L-07 | 添加预制菜到库存 | Light | 3 |
| MS-L-08 | 消费预制菜 | Light | 2 |
| MS-G-04 | 查看库存列表 | Grey | 2 |
| MS-D-03 | 过期提醒 | Dark | 2 |
| MS-L-09 | 记录运动 | Light | 3 |
| MS-G-01 | 换一个推荐 | Grey | 2 |

**总计：** 14 故事点

**故事类型分布：**
- Light: 3 个 (50%)
- Grey: 2 个 (33%)
- Dark: 1 个 (17%)

---

### 迭代 3：异常处理 + 体验优化

**目标：** 完善异常处理，优化日常使用体验

**故事列表：**

| Story ID | 标题 | 类型 | 故事点 |
|----------|------|------|--------|
| MS-D-01 | 注册失败处理 | Dark | 2 |
| MS-D-02 | 无匹配推荐处理 | Dark | 2 |
| MS-G-03 | 生成购物清单 | Grey | 2 |
| MS-G-05 | 查看运动历史 | Grey | 2 |

**总计：** 8 故事点

**故事类型分布：**
- Light: 0 个 (0%)
- Grey: 2 个 (50%)
- Dark: 2 个 (50%)

---

## 质量检查清单

- [x] 所有核心功能都有对应的最小故事
- [x] 每个最小故事遵循 INVEST 原则
- [x] 故事类型分布合理（Light 为主，Dark + Grey 补充）
- [x] 验收标准清晰可测试
- [x] 依赖关系已识别
- [x] 故事大小适中（1-5 故事点）
- [x] 反映 real.md 的约束
- [x] 故事地图展示清晰的用户旅程
- [x] 每个故事有明确的用户价值

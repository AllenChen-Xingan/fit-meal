# FitMeal - 认知模型文档

<meta>
  <document-id>fitmeal-cog</document-id>
  <version>1.0.0</version>
  <project>FitMeal 健身饮食助手</project>
  <type>Cognitive Model</type>
  <created>2026-01-14</created>
  <depends>real.md</depends>
</meta>

## 文档目的

基于"代理人 + 信息 + 情境"框架，定义 FitMeal 系统的认知模型。核心故事：**以最快速度知道我该吃什么，然后把它变成真实的食物**。

---

## 1. 代理人 (Agents)

<cog>
本系统包括以下代理人：
- user：用户（健身者/饮食管理者）
- ai-assistant：AI 饮食助手
</cog>

<user>
- 唯一编码：注册时生成的 UUID
- 常见分类：
  - 按目标：增肌、减脂、维持体重、健康饮食
  - 按忙碌程度：时间充裕、普通、非常忙碌
  - 按烹饪水平：新手（需详细步骤指导）、熟练、大厨级
- 核心假设：用户主要是烹饪新手，需要详细的食谱步骤指导
</user>

<ai-assistant>
- 唯一编码：system-ai
- 功能：根据用户运动记录和饮食历史，生成个性化饮食建议
- 交互模式：用户输入情境 → AI 分析 → 输出饮食建议 + 食谱
</ai-assistant>

---

## 2. 信息 (Information)

<workout>
- 唯一编码：{user_id}_{date}_{sequence}，如 u001_20260114_1
- 常见分类：
  - 按类型：力量训练、有氧运动、HIIT、瑜伽、休息日
  - 按强度：轻度、中度、高强度
  - 按部位：上肢、下肢、核心、全身
</workout>

<meal>
- 唯一编码：{user_id}_{date}_{meal_type}，如 u001_20260114_lunch
- 常见分类：
  - 按时间：早餐、午餐、晚餐、加餐
  - 按来源：现做、预制菜（提前批量制作）
- 核心模式：**预制菜模式** - 用户提前批量制作多份菜品冷藏/冷冻，忙时直接加热食用
</meal>

<food>
- 唯一编码：food_{category}_{id}，如 food_protein_chicken_breast
- 常见分类：
  - 按营养主导：蛋白质类、碳水类、脂肪类、蔬菜类、水果类
  - 按烹饪难度：即食、简单（<15分钟）、中等（15-30分钟）、复杂（>30分钟）
  - 按预制适合度：适合预制（冷藏3天+）、当天食用、不适合预制
</food>

<recipe>
- 唯一编码：recipe_{source}_{id}，如 recipe_xiachufang_12345
- **数据来源**：必须来自真实食谱平台
  - 下厨房 (xiachufang.com) - 爬虫抓取
  - 美食杰 (meishij.net) - 爬虫抓取
  - 食谱API（如 Spoonacular、Edamam）
- 常见分类：
  - 按难度：零基础、入门、进阶
  - 按时间：快手菜（<20分钟）、家常菜（20-45分钟）、硬菜（>45分钟）
  - 按适合预制：批量预制友好、现做现吃
- 必须包含：
  - 原始来源链接
  - 详细步骤（图文）
  - 食材清单和用量
  - 营养成分估算
</recipe>

<recommendation>
- 唯一编码：rec_{user_id}_{timestamp}
- 常见分类：
  - 按场景：运动前、运动后、日常、招待朋友
  - 按时间要求：极速（<5分钟）、快速（<15分钟）、正常、精致料理
</recommendation>

---

## 3. 关系 (Relations)

<rel>
- user-workout：一对多（一个用户有多条运动记录）
- user-meal：一对多（一个用户有多条饮食记录）
- meal-food：多对多（一餐包含多种食物，一种食物可出现在多餐）
- meal-recipe：多对一（一餐可以参考一个食谱制作）
- recipe-food：多对多（一个食谱包含多种食材）
- user-recommendation：一对多（一个用户可获得多条推荐）
- recommendation-recipe：一对多（一条推荐可以包含多个食谱建议）
</rel>

---

## 4. 情境 (Context)

### 4.1 核心使用场景

| 场景 | 用户状态 | 系统响应 |
|------|----------|----------|
| 运动前后 | "我刚练完/马上要练" | 快速推荐运动相关饮食 + 对应食谱 |
| 特别忙碌 | "没时间做饭" | 推荐预制菜库存中的选项，或加热即食方案 |
| 批量备餐 | "周末想多做点存着" | 推荐适合预制的食谱 + 批量采购清单 |
| 时间充裕 | "想做好吃的" | 推荐精致食谱（带详细步骤）+ 购物清单 |
| 招待朋友 | "朋友来家里" | 推荐适合分享的菜品组合 + 食谱 |

### 4.2 预制菜工作流

```
周末批量备餐 → 按食谱制作多份 → 分装冷藏/冷冻 → 工作日加热食用
```

系统需要：
- 追踪预制菜库存（做了什么、还剩多少、保质期）
- 推荐适合批量预制的食谱
- 提醒即将过期的预制菜

### 4.3 体验情境

- 情绪目标：减少"吃什么"的决策焦虑，增加饮食掌控感
- 交互风格：简洁直接，先给答案再解释原因
- 食谱呈现：详细步骤 + 图片指导（面向烹饪新手）
- 核心价值：**快速决策 → 跟着食谱做 → 营养达标**

---

## 5. 权重矩阵

<weights>
| 实体 | 重要性 | 说明 |
|------|--------|------|
| recommendation | ⭐⭐⭐⭐⭐ | 核心输出，用户使用的直接价值 |
| recipe | ⭐⭐⭐⭐⭐ | 核心内容，必须来自真实来源，详细指导用户烹饪 |
| workout | ⭐⭐⭐⭐ | 影响饮食建议的关键输入 |
| meal | ⭐⭐⭐⭐ | 历史记录 + 预制菜库存管理 |
| food | ⭐⭐⭐ | 基础数据，支撑推荐和营养计算 |
| user | ⭐⭐⭐ | 用户画像，长期优化基础 |
</weights>

---

## 6. 验证清单

- [ ] 所有实体都有唯一编码规则
- [ ] 分类方式符合用户心智模型
- [ ] 使用场景覆盖初步想法中的所有需求
- [ ] 权重分配反映业务优先级
- [ ] recipe 实体有明确的数据来源定义
- [ ] 预制菜工作流已定义
- [ ] 面向烹饪新手的食谱呈现方式已说明
